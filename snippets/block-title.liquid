{% # components v3.0.1 | Copyright Â© 2024 Archetype Themes Limited Partnership  | "Shopify Theme Store (https://www.shopify.com/legal/terms#9-additional-services)" License  %}
{%- comment -%}
  Renders the product title

  Accepts:
  - block {block} - Block object
  - product {product} - Product object
  - vendor_enable {boolean} - Whether to display the vendor
  - sku_enable {boolean} - Whether to display the SKU

  Usage:
  {% render 'block-title', block: block %}
{%- endcomment -%}

{%- liquid
  assign product = section.settings.product | default: product
  assign title_default = 'labels.example_product' | t
  assign title = product.title | default: title_default
  assign current_variant = product.selected_or_first_available_variant
  assign vendor_enable = vendor_enable | default: block.settings.vendor_enable, allow_false: true
  assign sku_enable = sku_enable | default: block.settings.sku_enable, allow_false: true
  assign collection_handle = product.vendor | handleize
  assign collection_for_vendor = collections[collection_handle]
  assign vendor_url_default = product.vendor | url_for_vendor
  assign vendor_url = collection_for_vendor.url | default: vendor_url_default
  assign type_title = block.settings.type_title
-%}

 {%- assign title_tokens = product.title | split: ' - ' -%}
  {%- assign product_family = title_tokens | first -%}
  {%- assign product_title = product.type -%}

  {%- for token in title_tokens offset: 1 -%}
    {%- capture product_title -%} 
				{{ product_title }} - {{ token }}
			{%- endcapture -%}
  {%- endfor -%}

<div class="product-block product_titleblock" data-section-id="{{ section.id }}" {{ block.shopify_attributes }}>
 
  {% if type_title %}
 <div class="product_single_type text_letter_spacing text-uppercase">
					{%- unless product.empty? -%}
						{{ product_family }}
					{%- endunless -%}
				</div>
				<h1 class="h2 product-single__title text-uppercase">
					{%- unless product.empty? -%}
						{{ product_title }}
					{%- else -%}
						product title
					{%- endunless -%}
				</h1>
  <div class="product_single_subtitle">
					{%- unless product.empty? -%}
						{{ product.metafields.descriptors.subtitle }}
					{%- endunless -%}
				</div>
  {% else %}
     <h1 class="h2 product-single__title">
    {{- title -}}
  </h1>
  {% endif %}
  
  <span class="product_sku">SKU: {{ product.selected_or_first_available_variant.sku }}</span>
  {%- if vendor_enable or sku_enable -%}
    <div class="product-single__vendor-sku">
      {%- if vendor_enable -%}
        <span class="product-single__vendor">
          <a href="{{ vendor_url }}">
            {{- product.vendor -}}
          </a>
        </span>
      {%- endif -%}

      {%- if sku_enable -%}
        <span class="product-single__sku">
          {%- render 'variant-sku', variant: current_variant -%}
        </span>
      {%- endif -%}
    </div>
  {%- endif -%}
</div>
